"""–°—Ç–∞—Ä—Ç –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é."""
from loguru import logger

from telegram import Update
from telegram.ext import ContextTypes

from bot.keyboards.main import get_main_menu_keyboard


async def cmd_start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ /start."""
    logger.info(f"cmd_start called: user_id={update.effective_user.id}, username={update.effective_user.username}")
    await update.message.reply_text(
        "üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
        reply_markup=get_main_menu_keyboard(),
    )
    logger.debug("–°—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ")


async def main_menu(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –∏–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é (–ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∏) –∏ –ø—Ä–æ—á–∏–π —Ç–µ–∫—Å—Ç."""
    text = update.message.text or ""
    logger.debug(f"main_menu called with: text={text}")

    if text == "üîÑ –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∏":
        from bot.handlers.development import show_development_menu

        await show_development_menu(update, context)
    else:
        await update.message.reply_text(
            "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é –∏–ª–∏ –∫–æ–º–∞–Ω–¥—É /start.",
            reply_markup=get_main_menu_keyboard(),
        )
